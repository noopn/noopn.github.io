<!DOCTYPE html>


<html lang="zh-CN">
  

    <head>
      <meta charset="utf-8" />
       
      <meta name="keywords" content="前端 web react" />
       
      <meta name="description" content="前端技术与生活。" />
      
      <meta
        name="viewport"
        content="width=device-width, initial-scale=1, maximum-scale=1"
      />
      <title>Git 命令/配置 |  四月八日</title>
  <meta name="generator" content="hexo-theme-ayer">
      
      <link rel="shortcut icon" href="/favicon.ico" />
       
<link rel="stylesheet" href="/dist/main.css">
 
<link rel="stylesheet" href="/css/fonts/remixicon.css">
 
<link rel="stylesheet" href="/css/custom.css">
 
      <script src="/js/pace.min.js"></script>
       
 

      <link rel="stylesheet" href="/css/bulma.min.css" />
      <script src="/js/sweetalert2.min.js"></script>

      <!-- mermaid -->
      
      <script src="https://cdn.staticfile.org/mermaid/8.14.0/mermaid.min.js"></script>
      
      <style>
        .swal2-styled.swal2-confirm {
          font-size: 1.6rem;
        }
      </style>
    <!-- hexo injector head_end start -->
<link rel="stylesheet" href="/css/katex.min.css">

<link rel="stylesheet" href="/css/style.css">
<!-- hexo injector head_end end --></head>
  </html>
</html>


<body>
  <div id="app">
    
      
    <main class="content on">
      <section class="outer">
  <article
  id="posts-devops/git命令-配置"
  class="article article-type-posts"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h1 class="article-title sea-center" style="border-left:0" itemprop="name">
  Git 命令/配置
</h1>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/posts/38d05d58ca17/" class="article-date">
  <time datetime="2024-08-26T00:51:21.000Z" itemprop="datePublished">2024-08-26</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/DevOps/">DevOps</a>
  </div>
  
<div class="word_count">
    <span class="post-time">
        <span class="post-meta-item-icon">
            <i class="ri-quill-pen-line"></i>
            <span class="post-meta-item-text"> 字数统计:</span>
            <span class="post-count">3.2k</span>
        </span>
    </span>

    <span class="post-time">
        &nbsp; | &nbsp;
        <span class="post-meta-item-icon">
            <i class="ri-book-open-line"></i>
            <span class="post-meta-item-text"> 阅读时长≈</span>
            <span class="post-count">13 分钟</span>
        </span>
    </span>
</div>
 
    </div>
      
    <div class="tocbot"></div>




  
    <div class="article-entry" itemprop="articleBody">
       
  <h4 id="查看-git-详细命令描述"><a href="#查看-git-详细命令描述" class="headerlink" title="查看 git 详细命令描述"></a>查看 git 详细命令描述</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 会在浏览器打开本地离线文档</span></span><br><span class="line">git <span class="built_in">help</span> [option]</span><br></pre></td></tr></table></figure>

<h4 id="查看仓库配置文件"><a href="#查看仓库配置文件" class="headerlink" title="查看仓库配置文件"></a>查看仓库配置文件</h4><p>查看本地仓库配置</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> [项目路径]</span><br><span class="line"><span class="built_in">cat</span> ./git/config</span><br></pre></td></tr></table></figure>

<p>查看全局仓库配置</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git config --global -l</span><br></pre></td></tr></table></figure>

<h4 id="设置用户名-x2F-邮箱"><a href="#设置用户名-x2F-邮箱" class="headerlink" title="设置用户名&#x2F;邮箱"></a>设置用户名&#x2F;邮箱</h4><p>用户信息会体现在 commit 提交信息中</p>
<p>设置本地用户</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config user.name <span class="string">&quot;xxx&quot;</span></span><br><span class="line">git config user.email <span class="string">&quot;xxx@.com&quot;</span></span><br></pre></td></tr></table></figure>

<p>设置全局用户</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config --global user.name <span class="string">&quot;xxx&quot;</span></span><br><span class="line">git config --global user.email <span class="string">&quot;xxx@.com&quot;</span></span><br></pre></td></tr></table></figure>

<p>如果本地用户没有设置会优先使用全局的用户设置, 如果存在多个用户可以设置本地用户信息</p>
<h4 id="git-add-做了什么"><a href="#git-add-做了什么" class="headerlink" title="git add 做了什么"></a>git add 做了什么</h4><p>执行 <code>git add .</code> 会将工作区的文件加入到暂存区，体现在 git objects 中会增加一个 <code>.git/objects/[文件sh1前2位]/[文件sh1第3位到40位]]</code> 的文件。<code>[sha1]</code> 的计算逻辑是：</p>
<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">h = sha1()</span><br><span class="line">h.update(&quot;blob [文件长度]\0&quot;)</span><br><span class="line">h.update(&#x27;[文件内容]&#x27;)</span><br></pre></td></tr></table></figure>

<p>可以使用 cat-file 命令查看文件的 类型和内容，<strong>可以看见用户文件的类型的 blob,这是第一种 object 类型</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">git cat-file -t [sha1]  <span class="comment">#查看类型</span></span><br><span class="line">git cat-file -p [sha1]  <span class="comment">#查看内容</span></span><br><span class="line">git cat-file -s [sha1]  <span class="comment">#查看文件长度</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#查看当前目录有所文件的信息</span></span><br><span class="line">git ls-files -s</span><br><span class="line"></span><br><span class="line"><span class="comment"># 100644 e69de29bb2d1d6434b8b29ae775ad8c2e48c5391 0       a/aa.js</span></span><br><span class="line"><span class="comment"># 文件权限         对象名称                                文件名称</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>解析 objects 文件的原始内容</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&quot;fs&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> zlib = <span class="built_in">require</span>(<span class="string">&quot;zlib&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建解压流</span></span><br><span class="line"><span class="keyword">const</span> inflate = zlib.<span class="title function_">createInflate</span>();</span><br><span class="line"><span class="keyword">const</span> readStream = fs.<span class="title function_">createReadStream</span>(</span><br><span class="line">  <span class="string">&quot;./c6dd0164fe0eb4fde767f9e731a6c8ade0b69f&quot;</span></span><br><span class="line">);</span><br><span class="line"><span class="keyword">const</span> writeStream = fs.<span class="title function_">createWriteStream</span>(<span class="string">&quot;bbb.txt&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 处理数据流</span></span><br><span class="line">readStream.<span class="title function_">pipe</span>(inflate).<span class="title function_">pipe</span>(writeStream);</span><br></pre></td></tr></table></figure>

<h4 id="git-commit-做了什么"><a href="#git-commit-做了什么" class="headerlink" title="git commit 做了什么"></a>git commit 做了什么</h4><p>查看执行 commit 之后新增文件的类型为 commit，<strong>commit 信息通过 object 文件保存，这是第二种 object 类型</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git cat-file -t [sha1] <span class="comment">#commit</span></span><br></pre></td></tr></table></figure>

<p>查看 commit 后生成文件的内容</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">git cat-file -p [sha1]</span><br><span class="line"></span><br><span class="line"><span class="comment">#tree de9ca8d60d61e2dbff58571e243256f0d084e030            tree对象文件名字（sha1）</span></span><br><span class="line"><span class="comment">#parent ef911d46ddddb69cfb0149bbc7217f582c668f21          上一次提交的文件名字(sha1)</span></span><br><span class="line"><span class="comment">#author sunzhiqi &lt;sunzhiqi@live.com&gt; 1724649175 +0800     作者 邮箱  时间戳 时区</span></span><br><span class="line"><span class="comment">#committer sunzhiqi &lt;sunzhiqi@live.com&gt; 1724649175 +0800</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#2                                                        提交的文件内容</span></span><br></pre></td></tr></table></figure>

<p>继续查看 tree 文件的内容, <strong>tree 类型描述提交的文件结构，这是第三个 object 类型</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">git cat-file -p [sha1]</span><br><span class="line"></span><br><span class="line"><span class="comment">#100644 blob b44836b41abbfc0640d4dd88fe587a9a145e5203    LICENSE</span></span><br><span class="line"><span class="comment">#100644 blob b9c2b056b82135218b26420e8479c56554b54afb    README.md</span></span><br><span class="line"><span class="comment">#100644 blob 4b9a8a29f6956ea1742e42354c5ba36fe717a2ed    a.txt</span></span><br><span class="line"><span class="comment">#100644 blob 9f478040b9109d4b1d25ad7f11528ed9a682f063    b.txt</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 如果提交内容中有文件夹，那么会有一个单独的 tree 描述文件夹的信息</span></span><br><span class="line"><span class="comment">#100644 tree xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx   folder</span></span><br></pre></td></tr></table></figure>

<p>另外 commit 操作会影响 HEAD 指针的指向</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看HEAD指向的分支</span></span><br><span class="line"><span class="built_in">cat</span> .git/HEAD         <span class="comment">#ref: refs/heads/master</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看分支对应的文件</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">cat</span> .git/refs/heads/master         <span class="comment">#ref: f45e2d0b45ca63806d263ae31276a3fbe4a7229d</span></span><br></pre></td></tr></table></figure>

<p><strong>Git 通过 3 种类型的 object files 组织文件</strong></p>
<ul>
<li><p>commit 类型，记录了提交的快照信息<br>提供 parent 指向了上一个提交 hash<br>提供 tree 指向了本次提交的快照</p>
</li>
<li><p>tree 类型，记录了目录结构<br>每次提交都会生成一个新的 tree 文件<br>tree 文件记录了目录下的文件信息，可能是 blob 文件，也可能是另一个 tree</p>
</li>
<li><p>blob 类型，记录了文件内容<br>blob 文件可以在不同的 tree 之间被复用</p>
</li>
</ul>
<h4 id="文件状态流转"><a href="#文件状态流转" class="headerlink" title="文件状态流转"></a>文件状态流转</h4><ul>
<li><p>Untracked 未跟踪, 未被提交到暂存区<br>使用 git add . 将文件加入到暂存区</p>
</li>
<li><p>Modified 已修改，提交暂存区的文件在工作区被修改了<br>用 git add . 将文件提交修改到暂存区</p>
</li>
<li><p>Staged 已暂存，提交到暂存区的文件<br>git commit 将暂存区的文件提交到仓库区</p>
</li>
<li><p>Unmodified 代码仓库中的状态</p>
</li>
</ul>
<h4 id="diff-查看文件差异"><a href="#diff-查看文件差异" class="headerlink" title="diff 查看文件差异"></a>diff 查看文件差异</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 对比工作区和暂存区</span></span><br><span class="line">git diff</span><br><span class="line"></span><br><span class="line"><span class="comment"># 对比暂存区和仓库区</span></span><br><span class="line">git diff --cached</span><br></pre></td></tr></table></figure>

<h4 id="branch-operations"><a href="#branch-operations" class="headerlink" title="branch operations"></a>branch operations</h4><p>分支的本质是指向 commit 的指针, 使用自定义名称代指 commit hash</p>
<p>git checkout 可以用于切换分支，也可以用于切换到某个 commit， 当使用这个命令后会提示正在处于一个分离头指针的状态。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git checkout [<span class="built_in">hash</span>]</span><br></pre></td></tr></table></figure>

<p>如果相对当前 commit 修改需要依附于一个分支,可以使用 git switch -c [branchName], 在旧的版本中可以使用 git checkout -b [branchName]</p>
<h5 id="fast-forward"><a href="#fast-forward" class="headerlink" title="fast-forward"></a>fast-forward</h5><p>从 master 切换到 feature 分支，如果 master commit 没有变化, 那么可以直接将 master 的指针指向 feature</p>
<p>如果分支已经合并，可以使用 <code>git reset ORIG_HEAD</code> 回到 merge 之前的 commit</p>
<p>commit 回滚后修改的文件会在本地显示为 untracked 或 modified 也就是在 feature 分支中修改或新增的文件。</p>
<p>如果需要丢弃这些修改可是使用 <code>git restore [filename]</code> 或 <code>git restore .</code> 丢弃所有修改。</p>
<p>如果有添加在暂存区的文件，可以使用 <code>git restore --staged .</code> 丢弃暂存区的修改</p>
<h5 id="3-way-merge"><a href="#3-way-merge" class="headerlink" title="3 way merge"></a>3 way merge</h5><p>如果 feature 分支落后于 master 分支，也就是在 feature 分支上提交了 commit 的同时， master 分支也提交了 commit， 那么在合并的时候会产生一个新的 commit 记录这两个分支的合并。查看这次新分支的提交内容</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">git cat-file -p 4ba28b350b0a8f0b</span><br><span class="line"></span><br><span class="line">tree 444ca23d83cc70878ddb01e5288a4322ded5ac0c</span><br><span class="line">parent 57086086b9bd92402227d58e7c6b87e285376910</span><br><span class="line">parent 720f3a44023361a4bad5586fe769ccc50f1bc1ab</span><br><span class="line">author sunzhiqi &lt;sunzhiqi@live.com&gt; 1744018132 +0800</span><br><span class="line">committer sunzhiqi &lt;sunzhiqi@live.com&gt; 1744018132 +0800</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>可以看到有两个 parent 指向，分别是 feature 最新的 commit hash 和 master 分支的合并之前的 commit hash。</p>
<h5 id="conflict-3-way-merge"><a href="#conflict-3-way-merge" class="headerlink" title="conflict 3 way merge"></a>conflict 3 way merge</h5><p>如果两个分支都修改了同一个文件，那么在合并的时候会产生冲突。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;&lt;&lt;&lt;&lt;&lt; <span class="string">HEAD</span></span><br><span class="line"><span class="string">master 的内容</span></span><br><span class="line"><span class="string">=======</span></span><br><span class="line"><span class="string">feature 的内容</span></span><br><span class="line"><span class="string">&gt;&gt;&gt;&gt;&gt;&gt; feature</span></span><br></pre></td></tr></table></figure>

<p>手动解决冲突后使用 <code>git add .</code> 提交暂存区, 然后执行 <code>git commit</code> 完成合并操作</p>
<h5 id="rebase"><a href="#rebase" class="headerlink" title="rebase"></a>rebase</h5><p>rebase 会将当前分支落后的于 master 分支的 commit 整合到当前分支，这样当前分支包含了 master 分支的最新 commit， 所以再次在 master 分支上执行 merge 操作就可以实现 fast-forward 合并。</p>
<p><strong>rebase 操作通常避免在 master 分支上执行，并且会修改已经提交的 commit hash,这可能会导致于已经提交到远程的 commit 冲突，多人协作中应该禁止。</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">git checkout feature</span><br><span class="line">git rebase master</span><br><span class="line">git checkout master</span><br><span class="line">git merge feature</span><br></pre></td></tr></table></figure>

<h4 id="remote-branch"><a href="#remote-branch" class="headerlink" title="remote branch"></a>remote branch</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">git branch -r  <span class="comment"># 查看远程分支</span></span><br><span class="line">git branch -a  <span class="comment"># 查看本地和远程分支</span></span><br><span class="line"></span><br><span class="line">git remote add origin [url] <span class="comment"># 关联远程仓库</span></span><br><span class="line">git remote -vv  <span class="comment"># 查看远程仓库</span></span><br><span class="line">git remote show origin <span class="comment"># 查看远程仓库详情</span></span><br></pre></td></tr></table></figure>

<h5 id="fetch"><a href="#fetch" class="headerlink" title="fetch"></a>fetch</h5><p>fetch 操作会将远程分支的最新 commit 信息下载到本地，但是不会自动合并到当前分支，也就是不会移动 HEAD 指针。</p>
<p>如果远程分支删除，需要本地同步可以使用以下命令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">git fetch --prune</span><br><span class="line"></span><br><span class="line"><span class="comment"># 或者</span></span><br><span class="line">git remote prune</span><br></pre></td></tr></table></figure>

<p>fetch 操作会使用一个非常重要的文件，**.git&#x2F;FETCH_HEAD**, 它记录所有远程分支的最新 commit 信息。<strong>并且当 git fetch 执行的时候会将当前分支信息置于文件顶部，其余的分支信息排在后面，这样 git pull 命令会利用最前面的分支信息合并分支</strong></p>
<h5 id="pull"><a href="#pull" class="headerlink" title="pull"></a>pull</h5><p><code>git pull</code> 操作会修改&#x2F;创建 ORIG_HEAD 指针，并且移动 HEAD 指向 merge 之前的 commit 可以用于回滚操作。</p>
<h5 id="push"><a href="#push" class="headerlink" title="push"></a>push</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">git push origin master</span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除远程分支</span></span><br><span class="line">git push origin --delete feature</span><br><span class="line">git push origin -d feature</span><br><span class="line"></span><br><span class="line"><span class="comment"># 推送本地标签到远程</span></span><br><span class="line">git push origin --tags</span><br><span class="line"></span><br><span class="line"><span class="comment"># 关联远程分支</span></span><br><span class="line">git branch --set-upstream-to=origin/feature feature</span><br><span class="line"></span><br><span class="line">git branch --set-upstream origin feature</span><br><span class="line">git branch -u origin feature</span><br></pre></td></tr></table></figure>

<h5 id="cherry-pick"><a href="#cherry-pick" class="headerlink" title="cherry-pick"></a>cherry-pick</h5><p>当分支无法合并,需要把某个分支的 commit 合并到另一个分支，可以使用 cherry-pick。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 切换到目标分支</span></span><br><span class="line">git cherry-pick [commitID]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 合并多个 commit</span></span><br><span class="line">git cherry-pick [commitID1] [commitID2]</span><br></pre></td></tr></table></figure>

<h4 id="tag"><a href="#tag" class="headerlink" title="tag"></a>tag</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">git tag v1.0</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建带注释的标签 -a 表示创建带注释的标签</span></span><br><span class="line">git tag -a v1.0 -m <span class="string">&#x27;tag message&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 指定任意commit打标签</span></span><br><span class="line">git tag -a v1.0 [commitID]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看标签</span></span><br><span class="line">git tag</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看标签详情</span></span><br><span class="line">git show v1.0</span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除标签</span></span><br><span class="line">git tag -d v1.0</span><br></pre></td></tr></table></figure>

<p><code>git tag v1.0</code> 创建轻量标签存放在 <code>.git/refs/tags</code> 目录下</p>
<p><code>git tag -a v1.0 -m &#39;tag message</code> 除了保存在 <code>.git/refs/tags</code> 目录下，还会创建一个对象文件保存在 <code>.git/objects</code> 下，<strong>类型是 tag, 这是第四种类型的 object，同时保存信息还包括注释，时间，作者</strong></p>
<h4 id="submodule"><a href="#submodule" class="headerlink" title="submodule"></a>submodule</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 添加子模块</span></span><br><span class="line">git submodule add [url]</span><br><span class="line">git submodule add ./path/to/submodule</span><br><span class="line"></span><br><span class="line"><span class="comment"># 首次 clone 项目不会包含子模块的内容</span></span><br><span class="line"><span class="comment"># 进入到子模块目录 执行</span></span><br><span class="line">git submodule update --init --recursive</span><br><span class="line"></span><br><span class="line"><span class="comment"># 再次更新子模块</span></span><br><span class="line">git submodule update --remote</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除子模块</span></span><br><span class="line">git <span class="built_in">rm</span> submodule</span><br><span class="line"><span class="built_in">rm</span> -rf .git/modules/submodule</span><br><span class="line"></span><br><span class="line"><span class="comment"># 从 .gitmodules 中移除该 submodule</span></span><br><span class="line">vim .gitmodules</span><br><span class="line"></span><br><span class="line"><span class="comment"># 从 .git/config 中移除该 submodule</span></span><br><span class="line">vim .git/config</span><br></pre></td></tr></table></figure>

<h4 id="我提交了什么"><a href="#我提交了什么" class="headerlink" title="我提交了什么"></a>我提交了什么</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git show</span><br><span class="line">git <span class="built_in">log</span> -n1 -p</span><br></pre></td></tr></table></figure>

<h4 id="想修改最近的提交信息"><a href="#想修改最近的提交信息" class="headerlink" title="想修改最近的提交信息"></a>想修改最近的提交信息</h4><p>提交信息后(commit),发现信息写错了，想修改最近一条提交信息(如果想修改当前提交以前的信息)。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">git commit --amend --only [filename] -m <span class="string">&#x27;update&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 会弹出交互式命令行手动提交</span></span><br><span class="line">git commit --amend --only [filename]</span><br></pre></td></tr></table></figure>

<p><code>--only</code> 参数非常重要,只对当前正在修改的文件进行提交，而不包括暂存区中的其他文件。</p>
<h4 id="怎么看是否落后与主分支"><a href="#怎么看是否落后与主分支" class="headerlink" title="怎么看是否落后与主分支"></a>怎么看是否落后与主分支</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git fetch origin</span><br><span class="line">git status</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># oneline  提交显示为一行</span></span><br><span class="line"><span class="comment"># graph    左侧显示一个 ASCII 图形，用于展示分支和合并的关系</span></span><br><span class="line"><span class="comment"># decorate 提交信息中附加上相关的分支、标签等引用名称</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看远程分支所有提交历史</span></span><br><span class="line">git <span class="built_in">log</span> --oneline --graph --decorate origin/master</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看所有分支的提价历史</span></span><br><span class="line">git <span class="built_in">log</span> --graph --all</span><br><span class="line"></span><br><span class="line"><span class="comment"># 指定分支</span></span><br><span class="line"></span><br><span class="line">git <span class="built_in">log</span> --graph origin/master master</span><br></pre></td></tr></table></figure>

<p>从分支上可以看出，主分支并没有 fff 的提交，最终合并在本地的 master 分支</p>
<p><img src="/001.png"></p>
<h4 id="取消上次提交中的某个文件"><a href="#取消上次提交中的某个文件" class="headerlink" title="取消上次提交中的某个文件"></a>取消上次提交中的某个文件</h4><p>一次提交中包括， <code>a.txt</code>, <code>b.txt</code> 现在想取消 <code>a.txt</code> 的提交，也就是恢复为上一次的状态</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看上一次提交文件的内容</span></span><br><span class="line">git show [commitID]:a.txt</span><br><span class="line"></span><br><span class="line"><span class="comment"># 将工作区中的文件恢复为上一次提交的内容</span></span><br><span class="line">git checkout HEAD^ a.txt</span><br><span class="line"></span><br><span class="line"><span class="comment"># 也可以使用 commitId</span></span><br><span class="line">git checkout [commitId] a.txt</span><br><span class="line"></span><br><span class="line"><span class="comment"># 将恢复的文件加入暂存区   -A 参数可以将删除文件也从暂存区删除</span></span><br><span class="line">git add .</span><br><span class="line"></span><br><span class="line"><span class="comment"># 提交修改到暂存区，沿用上一次的ID，并且不修改提交描述</span></span><br><span class="line">git commit --amend --no-edit</span><br></pre></td></tr></table></figure>

<p>如果当前的的历史已经提交到远程，由于并没有改变提交历史，所以可以安全的 <code>git push -f</code></p>
<h4 id="删除-上一次-x2F-多个-Commit"><a href="#删除-上一次-x2F-多个-Commit" class="headerlink" title="删除 上一次&#x2F;多个 Commit"></a>删除 上一次&#x2F;多个 Commit</h4><p>极不建议使用，虽然可以用 reset 重置为上一级的状态，但是会丢失当前的修改，而且会破坏提交历史。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># HEAD^ 上一个提交状态</span></span><br><span class="line"><span class="comment"># hard 改变暂存区和工作目录到指定的提交</span></span><br><span class="line">git reset HEAD^ --hard</span><br></pre></td></tr></table></figure>

<p>使用 soft 参数可以避免工作区被回滚，但提交历史已经被改变，如果你的分支还会被其他人使用，多人写作中会有安全问题。避免在公共分支中使用 <code>git reset</code>,</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git reset HEAD^ --soft</span><br></pre></td></tr></table></figure>

<p>对于公共分支唯一安全的做法是使用 <code>revert</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">git revert [commitId]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 如果有冲突，解决冲突后执行</span></span><br><span class="line">git add .</span><br><span class="line">git revert --<span class="built_in">continue</span></span><br></pre></td></tr></table></figure>

<h4 id="修改-commit-之后不能-push"><a href="#修改-commit-之后不能-push" class="headerlink" title="修改 commit 之后不能 push"></a>修改 commit 之后不能 push</h4><ul>
<li>可能你已经将历史 push 到远程，但是又修改了本地的最近的 commit, 导致 git 理解为你的 commit 和 远程的不同需要先合并分支。<br><strong>尽可能避免修改一个已经推送到远程的历史</strong>，如果必须要这样做，只能使用 <code>git push -f</code></li>
</ul>
<h4 id="reset-之后想找回"><a href="#reset-之后想找回" class="headerlink" title="reset 之后想找回"></a>reset 之后想找回</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 使用reflog查看头指针的移动历史</span></span><br><span class="line">git reflog</span><br><span class="line">git reset --hard [commitId]</span><br></pre></td></tr></table></figure>

<h4 id="提交文件的一部分-x2F-分别提交到两个-commit"><a href="#提交文件的一部分-x2F-分别提交到两个-commit" class="headerlink" title="提交文件的一部分&#x2F;分别提交到两个 commit"></a>提交文件的一部分&#x2F;分别提交到两个 commit</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 使用交互式命令行操作</span></span><br><span class="line">git add -p [filename]</span><br><span class="line"></span><br><span class="line"><span class="comment">#y - 将该 hunk 添加到暂存区</span></span><br><span class="line"><span class="comment">#n - 不将该 hunk 添加到暂存区</span></span><br><span class="line"><span class="comment">#s - 拆分当前 hunk 成更小的块</span></span><br><span class="line"><span class="comment">#e - 手动编辑当前 hunk</span></span><br><span class="line"><span class="comment">#q - 退出暂存模式</span></span><br><span class="line"><span class="comment">#a - 将当前文件的所有剩余 hunk 添加到暂存区</span></span><br><span class="line"><span class="comment">#d - 不将当前文件的任何剩余 hunk 添加到暂存区</span></span><br></pre></td></tr></table></figure>

<p>使用 <code>e</code> 手动编辑的模式时：</p>
<ul>
<li>如果想要取消删除行的修改，需要将行前的 <code>-</code> 替换为 <code> </code> 空字符</li>
<li>如果想要取消新增行的修改， 需要将 <code>+</code> 行整体删除</li>
</ul>
<p>添加到暂存区中后执行 <code>commit</code> 操作，接着再次执行一次 <code>git add .</code> 提交剩余的修改。</p>
<h4 id="有临时工作又不想提交当前的修改"><a href="#有临时工作又不想提交当前的修改" class="headerlink" title="有临时工作又不想提交当前的修改"></a>有临时工作又不想提交当前的修改</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 使用 stash 命令暂存当前修改</span></span><br><span class="line">git stash</span><br><span class="line">git stash push -m <span class="string">&quot;描述&quot;</span> <span class="comment">#为stash添加描述</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 切换到需要工作的分支进行开发</span></span><br><span class="line">git checkout [branch]</span><br><span class="line"><span class="comment"># 在当前分支中想要合并最新的主分支，也可以使用暂存功能</span></span><br><span class="line">git pull</span><br><span class="line"></span><br><span class="line"><span class="comment"># 工作结束后切换回原来的分支，并从暂存中取出内容</span></span><br><span class="line">git checkout [main branch]</span><br><span class="line">git stash pop</span><br></pre></td></tr></table></figure>

<h4 id="仅-stash-未暂存的更改，而保留暂存区的内容"><a href="#仅-stash-未暂存的更改，而保留暂存区的内容" class="headerlink" title="仅 stash 未暂存的更改，而保留暂存区的内容"></a>仅 stash 未暂存的更改，而保留暂存区的内容</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 已经git add 的内容不想放到stash中</span></span><br><span class="line"><span class="comment"># 只把刚在工作区修改的内容放到stash中</span></span><br><span class="line">git stash --keep-index</span><br><span class="line"></span><br><span class="line"><span class="comment"># 如果有文件还没有git add添加过，想要stash这些文件</span></span><br><span class="line">git stash -u</span><br></pre></td></tr></table></figure>
 
      <!-- reward -->
      
      <div id="reword-out">
        <div id="reward-btn">
          打赏
        </div>
      </div>
      
    </div>
    

    <!-- copyright -->
    
    <div class="declare">
      <ul class="post-copyright">
        <li>
          <i class="ri-copyright-line"></i>
          <strong>版权声明： </strong>
          
          本博客所有文章除特别声明外，著作权归作者所有。转载请注明出处！
          
        </li>
      </ul>
    </div>
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/DevOps/" rel="tag">DevOps</a></li></ul>

    </footer>
  </div>

   
  <nav class="article-nav">
    
      <a href="/posts/c753f6a1fa26/" class="article-nav-link">
        <strong class="article-nav-caption">上一篇</strong>
        <div class="article-nav-title">
          
            FocalBoard 私有化部署
          
        </div>
      </a>
    
    
      <a href="/posts/cf72544bb831/" class="article-nav-link">
        <strong class="article-nav-caption">下一篇</strong>
        <div class="article-nav-title">微前端 ④ qiankun</div>
      </a>
    
  </nav>

  
   
<div class="gitalk" id="gitalk-container"></div>

<link rel="stylesheet" href="https://cdn.staticfile.org/gitalk/1.7.2/gitalk.min.css">


<script src="https://cdn.staticfile.org/gitalk/1.7.2/gitalk.min.js"></script>


<script src="https://cdn.staticfile.org/blueimp-md5/2.19.0/js/md5.min.js"></script>

<script type="text/javascript">
  var gitalk = new Gitalk({
    clientID: 'bce2317b25da7c3c18f6',
    clientSecret: 'e0ab868ca9054234798be82c2b1c0c9dd8632307',
    repo: 'noopn.github.io',
    owner: 'noopn',
    admin: ['noopn'],
    // id: location.pathname,      // Ensure uniqueness and length less than 50
    id: md5(location.pathname),
    distractionFreeMode: false,  // Facebook-like distraction free mode
    pagerDirection: 'last'
  })

  gitalk.render('gitalk-container')
</script>

     
</article>

</section>
      <footer class="footer">
  <div class="outer">
    <ul>
      <li>
        Copyrights &copy;
        2015-2025
        <i class="ri-heart-fill heart_icon"></i> SunZhiqi
      </li>
    </ul>
    <ul>
      <li>
        
      </li>
    </ul>
    <ul>
      <li>
        
      </li>
    </ul>
    <ul>
      
    </ul>
    <ul>
      
    </ul>
    <ul>
      <li>
        <!-- cnzz统计 -->
        
      </li>
    </ul>
  </div>
</footer>    
    </main>
    <div class="float_btns">
      <div class="totop" id="totop">
  <i class="ri-arrow-up-line"></i>
</div>

    </div>
    <aside class="sidebar on">
      <button class="navbar-toggle"></button>
<nav class="navbar">
  
  <div class="logo">
    <a href="/"><img src="/images/ayer-side.png" alt="四月八日"></a>
  </div>
  
  <ul class="nav nav-main">
    
    <li class="nav-item">
      <a class="nav-item-link" href="/">主页</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/archives">归档</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/categories">分类</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/tags">标签</a>
    </li>
    
  </ul>
</nav>
<nav class="navbar navbar-bottom">
  <ul class="nav">
    <li class="nav-item">
      
      <a class="nav-item-link nav-item-search"  title="搜索">
        <i class="ri-search-line"></i>
      </a>
      
      
    </li>
  </ul>
</nav>
<div class="search-form-wrap">
  <div class="local-search local-search-plugin">
  <input type="search" id="local-search-input" class="local-search-input" placeholder="Search...">
  <div id="local-search-result" class="local-search-result"></div>
</div>
</div>
    </aside>
    <div id="mask"></div>

<!-- #reward -->
<div id="reward">
  <span class="close"><i class="ri-close-line"></i></span>
  <p class="reward-p"><i class="ri-cup-line"></i>此时无声胜有声！</p>
  <div class="reward-box">
    
    <div class="reward-item">
      <img class="reward-img" src="/images/alipay.jpg">
      <span class="reward-type">支付宝</span>
    </div>
    
    
    <div class="reward-item">
      <img class="reward-img" src="/images/wechat.jpg">
      <span class="reward-type">微信</span>
    </div>
    
  </div>
</div>
    
<script src="/js/jquery-3.6.0.min.js"></script>
 
<script src="/js/lazyload.min.js"></script>

<!-- Tocbot -->
 
<script src="/js/tocbot.min.js"></script>

<script>
  tocbot.init({
    tocSelector: ".tocbot",
    contentSelector: ".article-entry",
    headingSelector: "h1, h2, h3, h4, h5, h6",
    hasInnerContainers: true,
    scrollSmooth: true,
    scrollContainer: "main",
    positionFixedSelector: ".tocbot",
    positionFixedClass: "is-position-fixed",
    fixedSidebarOffset: "auto",
  });
</script>

<script src="/js/jquery.modal.min.js"></script>
<link rel="stylesheet" href="/css/jquery.modal.min.css" />
<script src="/js/jquery.justifiedGallery.min.js"></script>

<script src="/dist/main.js"></script>

<!-- ImageViewer -->
 <!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">
  <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
  <div class="pswp__bg"></div>

  <!-- Slides wrapper with overflow:hidden. -->
  <div class="pswp__scroll-wrap">
    <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
    <div class="pswp__container">
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
    </div>

    <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
    <div class="pswp__ui pswp__ui--hidden">
      <div class="pswp__top-bar">
        <!--  Controls are self-explanatory. Order can be changed. -->

        <div class="pswp__counter"></div>

        <button
          class="pswp__button pswp__button--close"
          title="Close (Esc)"
        ></button>

        <button
          class="pswp__button pswp__button--share"
          style="display: none"
          title="Share"
        ></button>

        <button
          class="pswp__button pswp__button--fs"
          title="Toggle fullscreen"
        ></button>

        <button
          class="pswp__button pswp__button--zoom"
          title="Zoom in/out"
        ></button>

        <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
        <!-- element will get class pswp__preloader--active when preloader is running -->
        <div class="pswp__preloader">
          <div class="pswp__preloader__icn">
            <div class="pswp__preloader__cut">
              <div class="pswp__preloader__donut"></div>
            </div>
          </div>
        </div>
      </div>

      <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
        <div class="pswp__share-tooltip"></div>
      </div>

      <button
        class="pswp__button pswp__button--arrow--left"
        title="Previous (arrow left)"
      ></button>

      <button
        class="pswp__button pswp__button--arrow--right"
        title="Next (arrow right)"
      ></button>

      <div class="pswp__caption">
        <div class="pswp__caption__center"></div>
      </div>
    </div>
  </div>
</div>

<link rel="stylesheet" href="/css/photoswipe.min.css" />
<link rel="stylesheet" href="/css/default-skin.min.css" />
<script src="/js/photoswipe.min.js"></script>
<script src="/js/photoswipe-ui-default.min.js"></script>

<script>
  function viewer_init() {
    let pswpElement = document.querySelectorAll(".pswp")[0];
    let $imgArr = document.querySelectorAll(
      ".article-entry img:not(.reward-img)"
    );

    $imgArr.forEach(($em, i) => {
      $em.onclick = () => {
        // slider展开状态
        // todo: 这样不好，后面改成状态
        if (document.querySelector(".left-col.show")) return;
        let items = [];
        $imgArr.forEach(($em2, i2) => {
          let img = $em2.getAttribute("data-idx", i2);
          let src =
            $em2.getAttribute("data-target") || $em2.getAttribute("src");
          let title = $em2.getAttribute("alt");
          // 获得原图尺寸
          const image = new Image();
          image.src = src;
          items.push({
            src: src,
            w: image.width || $em2.width,
            h: image.height || $em2.height,
            title: title,
          });
        });
        var gallery = new PhotoSwipe(pswpElement, PhotoSwipeUI_Default, items, {
          index: parseInt(i),
        });
        gallery.init();
      };
    });
  }
  viewer_init();
</script>
 
<!-- MathJax -->
 <script type="text/x-mathjax-config">
  MathJax.Hub.Config({
      tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
  });

  MathJax.Hub.Queue(function() {
      var all = MathJax.Hub.getAllJax(), i;
      for(i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
      }
  });
</script>

<script src="/js/MathJax.js"></script>
<script src="/js/TeX-AMS-MML_HTMLorMML-full.js"></script>

<script>
  var ayerConfig = {
    mathjax: true,
  };
</script>

<!-- Katex -->

<!-- busuanzi  -->

<!-- ClickLove -->

<!-- ClickBoom1 -->

<!-- ClickBoom2 -->

<!-- CodeCopy -->
 
<link rel="stylesheet" href="/css/clipboard.css">
 <script src="/js/clipboard.min.js"></script>
<script>
  function wait(callback, seconds) {
    var timelag = null;
    timelag = window.setTimeout(callback, seconds);
  }
  !(function (e, t, a) {
    var initCopyCode = function () {
      var copyHtml = "";
      copyHtml += '<button class="btn-copy" data-clipboard-snippet="">';
      copyHtml += '<i class="ri-file-copy-2-line"></i><span>COPY</span>';
      copyHtml += "</button>";
      $(".highlight .code pre").before(copyHtml);
      $(".article pre code").before(copyHtml);
      var clipboard = new ClipboardJS(".btn-copy", {
        target: function (trigger) {
          return trigger.nextElementSibling;
        },
      });
      clipboard.on("success", function (e) {
        let $btn = $(e.trigger);
        $btn.addClass("copied");
        let $icon = $($btn.find("i"));
        $icon.removeClass("ri-file-copy-2-line");
        $icon.addClass("ri-checkbox-circle-line");
        let $span = $($btn.find("span"));
        $span[0].innerText = "COPIED";

        wait(function () {
          // 等待两秒钟后恢复
          $icon.removeClass("ri-checkbox-circle-line");
          $icon.addClass("ri-file-copy-2-line");
          $span[0].innerText = "COPY";
        }, 2000);
      });
      clipboard.on("error", function (e) {
        e.clearSelection();
        let $btn = $(e.trigger);
        $btn.addClass("copy-failed");
        let $icon = $($btn.find("i"));
        $icon.removeClass("ri-file-copy-2-line");
        $icon.addClass("ri-time-line");
        let $span = $($btn.find("span"));
        $span[0].innerText = "COPY FAILED";

        wait(function () {
          // 等待两秒钟后恢复
          $icon.removeClass("ri-time-line");
          $icon.addClass("ri-file-copy-2-line");
          $span[0].innerText = "COPY";
        }, 2000);
      });
    };
    initCopyCode();
  })(window, document);
</script>
 
<!-- CanvasBackground -->

<script>
  if (window.mermaid) {
    mermaid.initialize({ theme: "default" });
  }
</script>


    
    

  </div>
</body>

</html>